# Инструкция по деплою на GitHub Pages

## Автоматический деплой через GitHub Actions

Проект настроен на автоматический деплой через GitHub Actions. При каждом push в ветку `main` происходит автоматическая сборка и деплой на GitHub Pages.

### Настройка (один раз):

1. Перейдите в настройки репозитория: `Settings` → `Pages`
2. В разделе `Source` выберите `GitHub Actions`
3. Сохраните изменения

### После настройки:

- При каждом push в `main` автоматически запускается workflow
- Проект собирается и деплоится на GitHub Pages
- Сайт будет доступен по адресу: `https://sergeykib.github.io/sergeykib/` (или ваш кастомный домен)

## Оптимизации производительности

### Реализованные оптимизации:

1. **Статический экспорт** - Next.js генерирует полностью статические HTML файлы
2. **Оптимизация шрифтов** - Preload и font-display: swap для быстрой загрузки
3. **Оптимизация изображений** - Использование WebP формата
4. **Минификация кода** - SWC минификация включена
5. **Удаление console.log** - В production сборке
6. **Кэширование** - Настроены заголовки для статических ресурсов
7. **Compression** - Gzip/Brotli compression включен
8. **Security headers** - Добавлены заголовки безопасности

### Проверка производительности:

```bash
# Локальная сборка
npm run build

# Анализ bundle size (если нужно)
npm run analyze
```

### Метрики производительности:

- **Lighthouse Score**: Целевой показатель > 90
- **First Contentful Paint (FCP)**: < 1.8s
- **Largest Contentful Paint (LCP)**: < 2.5s
- **Time to Interactive (TTI)**: < 3.8s
- **Cumulative Layout Shift (CLS)**: < 0.1

## Важные замечания

### API Routes

⚠️ **Внимание**: API routes (`/api/*`) не работают в статическом экспорте. Если используется форма обратной связи, необходимо:

1. Использовать внешний сервис (например, Formspree, Netlify Forms)
2. Или настроить отдельный сервер для обработки запросов
3. Или использовать переменную окружения `NEXT_PUBLIC_TELEGRAM_API_URL` для указания внешнего API

### Переменные окружения

Для статического экспорта доступны только переменные с префиксом `NEXT_PUBLIC_*`.

## Ручной деплой (если нужно)

```bash
# 1. Соберите проект
npm run build

# 2. Проверьте папку out/
ls -la out/

# 3. Закоммитьте и запушьте изменения
git add .
git commit -m "Deploy to GitHub Pages"
git push origin main
```

## Кастомный домен

Если используете кастомный домен (например, `segak.ru`):

1. Убедитесь, что файл `CNAME` содержит ваш домен
2. Настройте DNS записи у вашего провайдера домена:
   - A запись: `185.199.108.153`, `185.199.109.153`, `185.199.110.153`, `185.199.111.153`
   - CNAME запись: `username.github.io`
3. GitHub Actions автоматически скопирует `CNAME` в папку `out/` при сборке

## Troubleshooting

### Проблема: Сайт не обновляется после деплоя

**Решение**: Очистите кэш браузера или используйте режим инкогнито

### Проблема: 404 ошибки на страницах

**Решение**: Убедитесь, что `trailingSlash: true` в `next.config.js`

### Проблема: Стили не применяются

**Решение**: Проверьте, что файл `.nojekyll` создан в папке `out/`

